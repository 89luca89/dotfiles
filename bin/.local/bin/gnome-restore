#!/usr/bin/env bash

set -o errexit
set -o nounset

dest_folder="$HOME/dotfiles/_desktop/$(gnome-shell --version | sed 's/ /-/g' | sed -E 's/\.[0-9]+//g' | tr '[:upper:]' '[:lower:]')"
cd "${dest_folder}"
for f in  .*.conf; do
	dconf_path="$(echo "${f}" | sed 's/conf//g' | sed 's/\./\//g')"
	dconf load "${dconf_path}" < "${f}"
done
grep color-scheme ".org.gnome.desktop.interface.conf" |
    cut -d'=' -f2- | cut -d'-' -f2- |
    tr -d "\\\'" | tr -d '[:space:]' > ~/.local/share/current_theme
