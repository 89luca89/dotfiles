#!/bin/sh

# scroll-workspaces@gfxmonk.net
# Vitals@CoreCoding.com
EXTENSIONS="
"

# https://extensions.gnome.org/extension-data/VitalsCoreCoding.com.v61.shell-extension.zip
for extension in $EXTENSIONS; do
	if ! gnome-extensions list | grep --quiet "${extension}"; then
		busctl --user call org.gnome.Shell.Extensions \
			/org/gnome/Shell/Extensions org.gnome.Shell.Extensions \
			InstallRemoteExtension s "${extension}"
	fi
done

dconf reset -f /

# Restore gnome settings
dest_folder="$HOME/dotfiles/_desktop/$(gnome-shell --version | sed 's/ /-/g' | sed -E 's/\.[0-9a-z]+//g' | tr '[:upper:]' '[:lower:]')"
cd "${dest_folder}"
for f in  .*.conf; do
	dconf_path="$(echo "${f}" | sed 's/conf//g' | sed 's/\./\//g')"
	dconf load "${dconf_path}" < "${f}"
done
grep color-scheme ".org.gnome.desktop.interface.conf" |
	cut -d'=' -f2- | cut -d'-' -f2- |
	tr -d "\\\'" | tr -d '[:space:]' > ~/.local/share/current_theme

gnome-backup
