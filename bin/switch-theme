#!/bin/sh

set -o errexit
set -o nounset

# Detect current theme
if which xfconf-query >/dev/null; then
	THEME=$(xfconf-query -c xsettings -p /Net/ThemeName | sed "s/'//g")
fi
if which gsettings >/dev/null; then
	THEME=$(gsettings get org.gnome.desktop.interface gtk-theme | sed "s/'//g")
fi
# Light theme variables
LIGHT_THEME="Adwaita"
LIGHT_ICONS="Papirus-Light"
# Dark theme variables
DARK_THEME="Adwaita-dark"
DARK_ICONS="Papirus-Dark"

if echo "$THEME" | grep -iq $DARK_THEME; then
	echo "go light"
	THEME=$LIGHT_THEME
	ICONS=$LIGHT_ICONS
else
	echo "go dark"
	THEME=$DARK_THEME
	ICONS=$DARK_ICONS
fi

# gsettings detection
if which gsettings >/dev/null; then
	gsettings set org.gnome.desktop.interface gtk-theme "$THEME"
	gsettings set org.gnome.desktop.interface icon-theme "$ICONS"
fi
# xfce4 detection
if which xfconf-query >/dev/null; then
	xfconf-query -c xsettings -p /Net/ThemeName -s "$THEME"
	xfconf-query -c xsettings -p /Net/IconThemeName -s "$ICONS"
fi
