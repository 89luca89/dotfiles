#!/bin/sh
# Extract channel RSS feed from URL
# in clipboard or as argument

if [ -z "$1" ]; then
	URL=$(xclip -selection clipboard -o)
else
	URL="$1"
fi

ID=$(curl "$URL" | grep -Eo "https://www.youtube.com/channel/.*>" | cut -d'"' -f1 | sort -u | head -n1 | cut -d"\"" -f1 | rev | cut -d'/' -f1 | rev)

echo https://www.youtube.com/feeds/videos.xml?channel_id="$ID" | xclip -sel clip
